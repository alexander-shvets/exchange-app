<!DOCTYPE html>
<html>
<head>
    <title>Exchange Coins</title>

    <script src="business-logic.js"></script>
    <script src="state-reducers.js"></script>
    <script src="framework.js"></script>
    <style>
        template {display:none}
    </style>
</head>
<body>
    <template id="exchange-template">
        <form>
            <input name="type" value="EXCHANGE" type="hidden"/>
            <label>Please input pounds:
                <input name="input" value="{input}"/></label>
            <div id="result">{result}</div>
        </form>
    </template>
    <div id="exchange-placeholder"></div>
    <script>
        (function(){
            var store = createStore( exchangeApp, initialState )
            renderApplication()
            store.subscribe( renderApplication )
            function renderApplication(){
                var templateEl    = document.getElementById('exchange-template')
                var placeholderEl = document.getElementById('exchange-placeholder')

                placeholderEl.innerHTML =
                    renderTemplate( store.getState(), templateEl.innerHTML )

                var forms = placeholderEl.getElementsByTagName('FORM')
                for(form of forms) form.onsubmit = function(){
                    store.dispatch({type:'EXCHANGE', input: form.input.value})
                    return false
                }
            }
        })()
    </script>
</body>
</html>
